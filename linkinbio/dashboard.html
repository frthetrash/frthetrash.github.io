<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link-in-Bio Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* --- CSS STYLES --- */
        :root {
            --color-dark-blue: #2c3e50; /* Sidebar */
            --color-primary-blue: #3498db; /* Buttons/Active States */
            --color-light-gray: #f4f7f9; /* Main Background */
            --color-white: #ffffff;
            --color-text: #34495e;
            --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
        }

        body {
            background-color: var(--color-light-gray);
            color: var(--color-text);
            height: 100vh;
            overflow: hidden; /* Prevent body scroll, main-content will scroll */
        }

        /* --- Layout: Grid Container --- */
        #dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr; 
            height: 100%;
        }

        /* --- Sidebar Styling --- */
        #sidebar {
            background-color: var(--color-dark-blue);
            color: var(--color-white);
            display: flex;
            flex-direction: column;
            padding: 20px 0;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            padding-bottom: 30px;
            letter-spacing: 1px;
        }

        #sidebar nav ul {
            list-style: none;
        }

        #sidebar nav li a {
            display: block;
            padding: 12px 25px;
            text-decoration: none;
            color: #bdc3c7;
            transition: background-color 0.2s;
        }

        #sidebar nav li.active a {
            background-color: var(--color-primary-blue);
            color: var(--color-white);
            border-left: 4px solid var(--color-white);
            padding-left: 21px; 
        }

        /* --- Header Styling --- */
        #main-content {
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        #header {
            background-color: var(--color-white);
            display: flex;
            justify-content: flex-end; /* Push content to the right */
            align-items: center;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
            flex-shrink: 0; /* Prevents header from shrinking */
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            margin-left: 15px;
        }

        /* --- Content Body and Utility --- */
        .content-body {
            padding: 30px;
            flex-grow: 1;
        }

        .content-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .primary-btn {
            background-color: var(--color-primary-blue);
            color: var(--color-white);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.2s;
        }

        /* --- KPI Metrics Row Styling --- */
        .kpi-metrics-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background-color: var(--color-white);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            text-align: center;
        }

        .metric-card i {
            font-size: 1.5rem;
            color: var(--color-primary-blue);
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
        }

        .metric-title {
            font-size: 0.9rem;
            color: #95a5a6;
        }

        /* --- Main Layout: Editor and Preview --- */
        .main-layout-row {
            display: grid;
            grid-template-columns: 2fr 1fr; /* Editor takes 2/3, Preview takes 1/3 */
            gap: 30px;
        }

        .card {
            background-color: var(--color-white);
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }
        
        /* --- Link Management Editor Styling --- */
        .link-management-card h2 {
            margin-bottom: 20px;
            border-bottom: 1px solid #ecf0f1;
            padding-bottom: 10px;
        }

        #links-container {
            min-height: 200px;
        }

        .link-row {
            display: flex;
            align-items: center;
            background-color: var(--color-light-gray);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--color-primary-blue);
        }

        .drag-handle {
            margin-right: 15px;
            color: #bdc3c7;
            cursor: grab;
        }

        .link-details {
            flex-grow: 1;
            margin-right: 20px;
        }

        .link-title-input,
        .link-url-input {
            display: block;
            width: 100%;
            padding: 5px;
            margin-bottom: 5px;
            border: 1px solid #ecf0f1;
            border-radius: 3px;
            font-size: 0.95rem;
        }

        .link-stats {
            text-align: center;
            padding: 0 15px;
            white-space: nowrap;
        }

        .click-count {
            font-weight: 600;
            color: var(--color-primary-blue);
            font-size: 0.9rem;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            margin-left: 15px;
            padding: 5px;
        }

        /* --- Toggle Switch Styling --- */
        .switch {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 25px;
            margin: 0 10px;
        }
        /* ... (rest of the switch CSS is included in the full code block for brevity) ... */
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.4s; border-radius: 25px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 4px; background-color: white; transition: 0.4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--color-primary-blue); }
        input:checked + .slider:before { transform: translateX(18px); }
        

        /* --- Mobile Preview Pane Styling --- */
        .preview-col h2 {
             text-align: center;
             margin-bottom: 15px;
        }

        #mobile-preview {
            /* Simulate a phone frame */
            width: 300px; 
            height: 550px;
            margin: 0 auto;
            border: 12px solid #34495e; 
            border-radius: 40px;
            background-color: var(--color-white);
            box-shadow: var(--card-shadow), 0 0 0 10px #ecf0f1;
            overflow: hidden;
            position: relative;
        }

        .preview-screen {
            padding: 30px 15px;
            height: 100%;
            overflow-y: auto;
            text-align: center;
        }

        .preview-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 10px;
            border: 2px solid var(--color-primary-blue);
        }

        .preview-username {
            color: #7f8c8d;
            font-size: 1rem;
            margin-bottom: 25px;
        }

        #preview-links {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .preview-link-btn {
            width: 100%;
            background-color: var(--color-primary-blue);
            color: var(--color-white);
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }
    </style>
</head>
<body>

    <div id="dashboard-container">

        <aside id="sidebar">
            <div class="logo">LinkDash</div>
            <nav>
                <ul>
                    <li class="active"><a href="#"><i class="fas fa-link"></i> Links</a></li>
                    <li><a href="#"><i class="fas fa-palette"></i> Appearance</a></li>
                    <li><a href="#"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </nav>
        </aside>

        <main id="main-content">

            <header id="header">
                <div class="user-info">
                    <i class="fas fa-bell"></i>
                    <img src="https://via.placeholder.com/35" alt="User Avatar" class="avatar">
                    <span>Jane Doe</span>
                </div>
            </header>

            <section class="content-body">

                <div class="content-header-row">
                    <h1>Links Editor</h1>
                    <button id="add-link-btn" class="primary-btn"><i class="fas fa-plus"></i> Add New Link</button>
                </div>

                <div class="kpi-metrics-row">
                    <div class="metric-card">
                        <i class="fas fa-eye"></i>
                        <p class="metric-value" id="total-views">0</p>
                        <p class="metric-title">Total Views</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-mouse-pointer"></i>
                        <p class="metric-value" id="total-clicks">0</p>
                        <p class="metric-title">Total Clicks</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-percent"></i>
                        <p class="metric-value" id="ctr">0.00%</p>
                        <p class="metric-title">Click-Through Rate (CTR)</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-users"></i>
                        <p class="metric-value" id="followers-gained">+150</p>
                        <p class="metric-title">Followers Gained</p>
                    </div>
                </div>

                <div class="main-layout-row">

                    <div class="editor-col">
                        <div class="card link-management-card">
                            <h2>Your Links</h2>
                            <div id="links-container">
                                <p style="text-align: center; color: #95a5a6; margin-top: 50px;">Loading links...</p>
                            </div>
                            <button class="save-changes-btn primary-btn">Publish Changes</button>
                        </div>
                    </div>

                    <div class="preview-col">
                        <h2>Live Preview</h2>
                        <div id="mobile-preview">
                            <div class="preview-screen">
                                <img src="https://via.placeholder.com/80" alt="Profile Pic" class="preview-avatar">
                                <h3 class="preview-username">@YourUsername</h3>
                                <div id="preview-links">
                                    </div>
                            </div>
                        </div>
                    </div>

                </div>

            </section>
        </main>

    </div>

    <script>
        // --- JAVASCRIPT LOGIC ---
        
        // --- 1. Data Model and Initialization ---
        let links = [
            { id: 1, title: "My Portfolio Site", url: "https://portfolio.com", isActive: true, clicks: 750 },
            { id: 2, title: "Latest YouTube Video", url: "https://youtube.com/latest", isActive: true, clicks: 320 },
            { id: 3, title: "Follow Me on X", url: "https://x.com/username", isActive: false, clicks: 180 },
            { id: 4, title: "My E-book Offer", url: "https://ebook-link.com", isActive: true, clicks: 50 }
        ];

        let nextLinkId = 5; 

        // --- DOM Element References ---
        const linksContainer = document.getElementById('links-container');
        const previewLinksContainer = document.getElementById('preview-links');
        const addLinkBtn = document.getElementById('add-link-btn');

        // --- 2. Core Render Functions ---

        /**
         * Renders the editable link rows in the main editor area.
         */
        function renderLinksEditor() {
            linksContainer.innerHTML = ''; 

            links.forEach(link => {
                const linkRow = document.createElement('div');
                linkRow.className = 'link-row';
                linkRow.dataset.linkId = link.id;
                
                // Using template literals for elegant DOM creation
                linkRow.innerHTML = `
                    <i class="fas fa-grip-vertical drag-handle"></i>
                    <div class="link-details">
                        <input type="text" class="link-title-input" data-id="${link.id}" data-field="title" value="${link.title}" placeholder="Enter Link Title">
                        <input type="text" class="link-url-input" data-id="${link.id}" data-field="url" value="${link.url}" placeholder="Enter URL">
                    </div>
                    <div class="link-stats">
                        <span class="click-count">Clicks: ${link.clicks.toLocaleString()}</span>
                    </div>
                    <label class="switch">
                        <input type="checkbox" ${link.isActive ? 'checked' : ''} data-id="${link.id}" class="link-toggle">
                        <span class="slider round"></span>
                    </label>
                    <button class="delete-btn" data-id="${link.id}"><i class="fas fa-trash"></i></button>
                `;
                linksContainer.appendChild(linkRow);
            });

            attachEventListeners(); 
        }

        /**
         * Renders the active links in the mobile preview pane.
         */
        function renderPreview() {
            previewLinksContainer.innerHTML = ''; 
            const activeLinks = links.filter(link => link.isActive);

            if (activeLinks.length === 0) {
                previewLinksContainer.innerHTML = '<p style="color:#95a5a6; padding: 20px;">No links active.</p>';
                return;
            }

            activeLinks.forEach(link => {
                const button = document.createElement('button');
                button.className = 'preview-link-btn';
                button.textContent = link.title;
                previewLinksContainer.appendChild(button);
            });
        }

        /**
         * Updates the KPI metrics based on current link data.
         */
        function updateKPIs() {
            const totalClicks = links.reduce((sum, link) => sum + link.clicks, 0);
            const totalViews = 25800; // Static placeholder for initial feel
            
            const ctr = totalViews > 0 ? (totalClicks / totalViews) * 100 : 0;

            document.getElementById('total-clicks').textContent = totalClicks.toLocaleString();
            document.getElementById('total-views').textContent = totalViews.toLocaleString(); 
            document.getElementById('ctr').textContent = `${ctr.toFixed(2)}%`; 
        }


        // --- 3. CRUD Operations and Event Handlers ---

        /**
         * Adds a new, blank link to the data model.
         */
        function addLink() {
            const newLink = {
                id: nextLinkId++,
                title: "New Link Title",
                url: "https://",
                isActive: true,
                clicks: 0
            };
            links.push(newLink);
            refreshDashboard();
        }

        /**
         * Updates a specific link's title or URL in the data model.
         */
        function updateLink(id, field, value) {
            const link = links.find(l => l.id === id);
            if (link) {
                // Basic sanitization/validation for elegant code (preventing script injection)
                link[field] = field === 'title' ? value.replace(/</g, "&lt;").replace(/>/g, "&gt;") : value; 
                renderPreview(); 
            }
        }

        /**
         * Toggles the isActive status of a link.
         */
        function toggleLink(id) {
            const link = links.find(l => l.id === id);
            if (link) {
                link.isActive = !link.isActive;
                refreshDashboard();
            }
        }

        /**
         * Deletes a link from the data model.
         */
        function deleteLink(id) {
            links = links.filter(l => l.id !== id);
            refreshDashboard();
        }

        /**
         * Attaches necessary event listeners using delegation for clean code.
         */
        function attachEventListeners() {
            // Re-attaching listeners is necessary since we clear and re-render the linksContainer

            // Listeners for text input changes (title/url)
            linksContainer.querySelectorAll('.link-title-input, .link-url-input').forEach(input => {
                input.addEventListener('input', (e) => {
                    const id = parseInt(e.target.dataset.id);
                    const field = e.target.dataset.field;
                    updateLink(id, field, e.target.value);
                });
            });

            // Listeners for toggle switches
            linksContainer.querySelectorAll('.link-toggle').forEach(checkbox => {
                checkbox.addEventListener('change', (e) => {
                    const id = parseInt(e.target.dataset.id);
                    toggleLink(id);
                });
            });

            // Listeners for delete buttons
            linksContainer.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = parseInt(e.currentTarget.dataset.id);
                    if (confirm('Delete this link?')) {
                         deleteLink(id);
                    }
                });
            });
        }


        /**
         * Main function to refresh all dynamic parts of the dashboard.
         */
        function refreshDashboard() {
            // Efficiently update all parts of the UI
            renderLinksEditor();
            renderPreview();
            updateKPIs();
        }

        // --- Initial Setup ---

        // Attach listener to the main "Add New Link" button
        addLinkBtn.addEventListener('click', addLink);

        // Placeholder for publishing changes
        document.querySelector('.save-changes-btn').addEventListener('click', () => {
            console.log('Publishing changes...', links);
            alert('Changes Published successfully! (Check console for data)');
        });


        // Initial render when the page loads
        document.addEventListener('DOMContentLoaded', refreshDashboard);
    </script>
</body>
</html>
